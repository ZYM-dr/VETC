import SimpleITK as sitkimport osimport radiomicsfrom radiomics import featureextractorimport pandas as pdbasepath ='D:/DOCZ 2021-2025/Gd-EOB-DTPA ralated/Gd-EOB-DTPA DATA/RadiomicDATA20220404/vp/'folders = os.listdir(basepath)print(folders)# 标准化df = pd.DataFrame()settings = {}settings['binWidth']= 25settings["resampledPicelSpacing"] = [3,3,3]settings["interpolator"] = sitk.sitkNearestNeighborsettings["nomalize"] = True# settings["Original"] = {}# settings["Wavelet"] = {}# settings["LoG"] = {'sigma': [4.0]}extractor = featureextractor.RadiomicsFeatureExtractor(**settings)extractor.enableImageTypes(Original={}, LoG={'sigma': [1.0,2.0,3.0,4.0,5.0]}, Wavelet={})for folder in folders:    files = os.listdir(os.path.join(basepath, folder))    print(files)    # if folder > r'G:/218_stan_radiomic/test/3':    #     continue    for file in files:        if file.endswith("image.nrrd"):            imageFile = os.path.join(basepath, folder, file)        if file.endswith("new_label.nrrd"):            maskFile = os.path.join(basepath, folder, file)    # extractor.enableImageTypes(Original={}, LoG={'sigma': [4.0]}, Wavelet={})    try:      featureVector = extractor.execute(imageFile, maskFile)      df_new = pd.DataFrame.from_dict(featureVector.values()).T      df_new.columns = featureVector.keys()      df_new['filename'] = folder      df = pd.concat([df,df_new])      print(imageFile, maskFile,'successful!')    except:      print(imageFile, maskFile,'failure!')df.to_excel(os.path.join(basepath, 'results.xlsx'))